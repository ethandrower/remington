# Autonomous Project Manager - Environment Configuration
# Copy this file to .env and fill in your actual values
# NEVER commit .env to git (it contains secrets)

# ============================================================================
# ANTHROPIC API (Required for Agent Reasoning)
# ============================================================================
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-your-key-here

# ============================================================================
# ATLASSIAN CONFIGURATION
# ============================================================================
# NOTE: Jira and Confluence access is primarily via MCP connections (.mcp.json)
# No environment variables required for Jira/Confluence when using MCP.
#
# API tokens below are only needed for:
# - Bitbucket API access (if monitoring PRs directly)
# - Other Atlassian services not covered by MCP

# Bitbucket OAuth Configuration (Only needed for Bitbucket API)
# Get these from your Atlassian OAuth app:
# https://developer.atlassian.com/cloud/jira/platform/oauth-2-3lo-apps/
# ATLASSIAN_OAUTH_CLIENT_ID=your_client_id_here
# ATLASSIAN_OAUTH_CLIENT_SECRET=your_client_secret_here
# ATLASSIAN_OAUTH_REDIRECT_URI=http://localhost:3000/callback
# ATLASSIAN_OAUTH_ACCESS_TOKEN=your_access_token_here
# ATLASSIAN_OAUTH_REFRESH_TOKEN=your_refresh_token_here

# Atlassian Instance Configuration
# Get your Cloud ID from: https://admin.atlassian.com/ (in the URL)
ATLASSIAN_CLOUD_ID=your-cloud-id-here
JIRA_INSTANCE_URL=https://your-company.atlassian.net
ATLASSIAN_PROJECT_KEY=YOUR_PROJECT

# Bot User Account ID (for self-identification)
# Lookup using: https://id.atlassian.com/manage-profile/profile-and-visibility
# PM_BOT_ACCOUNT_ID=5f8a1b2c3d4e5f6a7b8c9d0e

# ============================================================================
# SLACK BOT CONFIGURATION
# ============================================================================
# IMPORTANT: For production, create a dedicated Slack app with bot user.
# See docs/SLACK_BOT_SETUP.md for complete setup instructions.
#
# Benefits of Slack bot:
# - Team can @mention bot to trigger workflows
# - Automated posting of standup reports and SLA alerts
# - Thread-based discussions for better organization
# - Clear identification of automated messages

# Slack Bot Token
# Get from: https://api.slack.com/apps > Your App > OAuth & Permissions
SLACK_BOT_TOKEN=xoxb-your-bot-token-here

# Slack Channel for standup reports and SLA alerts
SLACK_CHANNEL_STANDUP=C123ABC456

# Slack Channel for PM Agent logging (heartbeats, activity logs, error alerts)
# Create a dedicated channel like #pm-agent-logs
SLACK_PM_AGENT_LOG_CHANNEL=C09S3K9SK0T

# Slack Bot User ID (for self-identification, prevents infinite loops)
# Get using: client.auth_test() or from Slack app settings
SLACK_BOT_USER_ID=U123ABC456

# ============================================================================
# COMPANY CONFIGURATION
# ============================================================================
COMPANY_NAME=YourCompany  # Used in Slack messages and reports

# ============================================================================
# REPOSITORY MONITORING (Optional - for multi-repo code analysis)
# ============================================================================
# Main repository path (absolute path to the codebase you want to monitor)
MAIN_REPO_PATH=/path/to/your/main/repository

# Secondary repository (optional, for multi-repo setups)
# SECONDARY_REPO_PATH=/path/to/secondary/repository

# Project Manager repository path (this repository)
PM_AGENT_PATH=/path/to/project-manager

# ============================================================================
# TEAM CONFIGURATION (Optional)
# ============================================================================
# Configure team roster for @mentions and productivity tracking
# Option 1: Sync from Confluence page
CONFLUENCE_TEAM_PAGE_ID=your-page-id-here

# Option 2: Manual configuration (comma-separated Jira account IDs)
# Lookup account IDs using: https://id.atlassian.com/manage-profile/profile-and-visibility
# TEAM_MEMBER_NAMES=John Doe,Jane Smith,Bob Johnson
# TEAM_MEMBER_IDS=accountId:123abc,accountId:456def,accountId:789ghi

# SLA Configuration (business hours)
BUSINESS_HOURS_START=9
BUSINESS_HOURS_END=17
BUSINESS_TIMEZONE=America/New_York

# Holidays (comma-separated dates in YYYY-MM-DD format)
COMPANY_HOLIDAYS=2025-01-01,2025-05-26,2025-07-04,2025-09-01,2025-11-27,2025-12-25

# Workflow Configuration
DRY_RUN=false  # Set to true to prevent Slack/Jira posting during testing
VERBOSE_LOGGING=false

# Polling Intervals (in seconds)
# Slack: Primary mechanism (no webhook alternative for mentions)
SLACK_POLL_INTERVAL=15

# Jira: Backup polling (webhooks are primary)
JIRA_BACKUP_POLL_INTERVAL=3600  # 1 hour

# Bitbucket: Backup polling (webhooks are primary)
BITBUCKET_BACKUP_POLL_INTERVAL=3600  # 1 hour

# Bitbucket Configuration (for polling)
# Your Bitbucket workspace slug and repositories to monitor (comma-separated)
BITBUCKET_WORKSPACE=your-workspace-slug
BITBUCKET_REPOS=repo1,repo2
